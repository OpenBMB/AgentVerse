"use strict";var e=require("primevue/ripple"),t=require("primevue/utils"),n=require("primevue/basecomponent"),i=require("primevue/selectbutton/style"),r=require("vue");function o(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var a=o(e);function l(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=u(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(e,t){if(e){if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}function c(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function d(e){if(Array.isArray(e))return p(e)}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var f={name:"SelectButton",extends:{name:"BaseSelectButton",extends:o(n).default,props:{modelValue:null,options:Array,optionLabel:null,optionValue:null,optionDisabled:null,multiple:Boolean,unselectable:{type:Boolean,default:!0},allowEmpty:{type:Boolean,default:!0},disabled:Boolean,dataKey:null,"aria-labelledby":{type:String,default:null}},style:o(i).default,provide:function(){return{$parentInstance:this}}},emits:["update:modelValue","focus","blur","change"],data:function(){return{focusedIndex:0}},mounted:function(){this.defaultTabIndexes()},methods:{defaultTabIndexes:function(){for(var e=t.DomHandler.find(this.$refs.container,'[data-pc-section="button"]'),n=t.DomHandler.findSingle(this.$refs.container,'[data-p-highlight="true"]'),i=0;i<e.length;i++)(!0===t.DomHandler.getAttribute(e[i],"data-p-highlight")&&t.ObjectUtils.equals(e[i],n)||null===n&&0==i)&&(this.focusedIndex=i)},getOptionLabel:function(e){return this.optionLabel?t.ObjectUtils.resolveFieldData(e,this.optionLabel):e},getOptionValue:function(e){return this.optionValue?t.ObjectUtils.resolveFieldData(e,this.optionValue):e},getOptionRenderKey:function(e){return this.dataKey?t.ObjectUtils.resolveFieldData(e,this.dataKey):this.getOptionLabel(e)},getPTOptions:function(e,t){return this.ptm(t,{context:{active:this.isSelected(e),disabled:this.isOptionDisabled(e),option:e}})},isOptionDisabled:function(e){return!!this.optionDisabled&&t.ObjectUtils.resolveFieldData(e,this.optionDisabled)},onOptionSelect:function(e,n,i){var r=this;if(!this.disabled&&!this.isOptionDisabled(n)){var o=this.isSelected(n);if(!o||this.unselectable&&this.allowEmpty){var a,l,p=this.getOptionValue(n);a=this.multiple?o?this.modelValue.filter((function(e){return!t.ObjectUtils.equals(e,p,r.equalityKey)})):this.modelValue?[].concat(d(l=this.modelValue)||c(l)||u(l)||s(),[p]):[p]:o?null:p,this.focusedIndex=i,this.$emit("update:modelValue",a),this.$emit("change",{event:e,value:a})}}},isSelected:function(e){var n=!1,i=this.getOptionValue(e);if(this.multiple){if(this.modelValue){var r,o=l(this.modelValue);try{for(o.s();!(r=o.n()).done;){if(t.ObjectUtils.equals(r.value,i,this.equalityKey)){n=!0;break}}}catch(e){o.e(e)}finally{o.f()}}}else n=t.ObjectUtils.equals(this.modelValue,i,this.equalityKey);return n},onKeydown:function(e,t,n){switch(e.code){case"Space":this.onOptionSelect(e,t,n),e.preventDefault();break;case"ArrowDown":case"ArrowRight":this.changeTabIndexes(e,"next"),e.preventDefault();break;case"ArrowUp":case"ArrowLeft":this.changeTabIndexes(e,"prev"),e.preventDefault()}},changeTabIndexes:function(e,t){for(var n,i,r=0;r<=this.$refs.container.children.length-1;r++)"0"===this.$refs.container.children[r].getAttribute("tabindex")&&(n={elem:this.$refs.container.children[r],index:r});this.focusedIndex=i="prev"===t?0===n.index?this.$refs.container.children.length-1:n.index-1:n.index===this.$refs.container.children.length-1?0:n.index+1,this.$refs.container.children[i].focus()},onFocus:function(e){this.$emit("focus",e)},onBlur:function(e,t){e.target&&e.relatedTarget&&e.target.parentElement!==e.relatedTarget.parentElement&&this.defaultTabIndexes(),this.$emit("blur",e,t)}},computed:{equalityKey:function(){return this.optionValue?null:this.dataKey}},directives:{ripple:a.default}},h=["aria-labelledby"],b=["tabindex","aria-label","role","aria-checked","aria-disabled","onClick","onKeydown","onBlur","data-p-highlight","data-p-disabled"];f.render=function(e,t,n,i,o,a){var l=r.resolveDirective("ripple");return r.openBlock(),r.createElementBlock("div",r.mergeProps({ref:"container",class:e.cx("root"),role:"group","aria-labelledby":e.ariaLabelledby},e.ptm("root"),{"data-pc-name":"selectbutton"}),[(r.openBlock(!0),r.createElementBlock(r.Fragment,null,r.renderList(e.options,(function(n,i){return r.withDirectives((r.openBlock(),r.createElementBlock("div",r.mergeProps({key:a.getOptionRenderKey(n),tabindex:i===o.focusedIndex?"0":"-1","aria-label":a.getOptionLabel(n),role:e.multiple?"checkbox":"radio","aria-checked":a.isSelected(n),"aria-disabled":e.optionDisabled,class:e.cx("button",{option:n}),onClick:function(e){return a.onOptionSelect(e,n,i)},onKeydown:function(e){return a.onKeydown(e,n,i)},onFocus:t[0]||(t[0]=function(e){return a.onFocus(e)}),onBlur:function(e){return a.onBlur(e,n)}},a.getPTOptions(n,"button"),{"data-p-highlight":a.isSelected(n),"data-p-disabled":a.isOptionDisabled(n)}),[r.renderSlot(e.$slots,"option",{option:n,index:i,class:r.normalizeClass(e.cx("label"))},(function(){return[r.createElementVNode("span",r.mergeProps({class:e.cx("label")},a.getPTOptions(n,"label")),r.toDisplayString(a.getOptionLabel(n)),17)]}))],16,b)),[[l]])})),128))],16,h)},module.exports=f;
